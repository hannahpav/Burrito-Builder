<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSGA-II Optimization for Burrito Builder</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div id="loading-indicator">Loading ingredient data...</div>

    <div class="form-row">
        <div class="form-column left-column">
            <label for="importing-country">Choose your location (Importing country):</label>
            <select id="importing-country"></select>
        </div>

        <div class="form-column right-column">
            <label>Enter your budget:</label>
            <div class="budget-input-container">
                <span>$</span>
                <input type="number" id="budget" min="0" step="0.01">
            </div>
        </div>
    </div>

    <div class="form-row">
        <div class="form-column left-column">
            <h3>Choose ingredients:</h3>
            <div id="ingredients-container"></div>
        </div>

        <div class="form-column right-column">
            <div id="pareto-front">
                <h3>Pareto Front Visualization</h3>
                <svg id="pareto-chart"></svg>
            </div>
        </div>
    </div>

    <div class="optimization-controls">
        <h3>Set Priorities for Optimization</h3>
        <div class="slider-container">
            <input type="range" id="weight-slider" min="0" max="100" value="50">
            <div class="weight-display">
                <span id="cost-weight-display">50%</span>
                <span id="impact-weight-display">50%</span>
            </div>
        </div>
    </div>

    <div id="map">
        <div class="map-header">
            <h3>Optimal Sourcing Countries</h3>
            <div id="solution-info"></div>
        </div>
        <svg id="country-map"></svg>
    </div>

    <div class="tooltip"></div>

    <!-- Load scripts -->
    <script type="module">
        import app from './scripts/main.js';

        document.addEventListener('DOMContentLoaded', () => {
            app.initialize().catch(error => {
                console.error('Failed to initialize application:', error);
                document.getElementById('loading-indicator').textContent =
                    'Failed to load application. Please refresh the page.';
            });
        });
    </script>
</body>
</html>